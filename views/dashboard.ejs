<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Vinted Trends Dashboard</title>
  <link rel="stylesheet" href="/style.css">
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <h1>Vinted Trends Dashboard</h1>

  <section>
    <h2>ğŸ”¥ Quick Selling Items</h2>
    <div id="quick-sells" class="grid"></div>
  </section>

  <script>
    const socket = io();
    const quickSells = document.getElementById("quick-sells");

    // Load existing sold items
    fetch("/api/sold")
      .then(res => res.json())
      .then(items => items.forEach(addQuickSellCard));

    socket.on("item_sold", (item) => addQuickSellCard(item));

    function addQuickSellCard(item) {
      const div = document.createElement("div");
      div.className = "card";
      div.innerHTML = `
        <a href="${item.link}" target="_blank">
          <img src="${item.image}" alt="${item.name}">
          <h3>${item.name}</h3>
          <p>ğŸ’² ${item.price}</p>
          <p>â± ${item.timeToSell || "?"}s to sell</p>
        </a>
      `;
      quickSells.prepend(div);
    }
  </script>
</body>
</html>
